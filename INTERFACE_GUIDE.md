# Руководство по интерфейсу Visualizer Pro v2

Данное руководство содержит подробное описание всех вкладок, настроек и функций интерфейса "Console v2".

## 1. Навигация и общие элементы
Интерфейс представляет собой боковую панель управления, которая вызывается клавишей **"Q"** или кликом по холсту. Панель разделена на 5 тематических вкладок.

---

## 2. Вкладка SCENE (Сцена)
Отвечает за базовые системные настройки и глобальный визуальный стиль.

### 2.1. Система
*   **Fullscreen (Полноэкранный режим)**: Переключает приложение в режим на весь экран.

### 2.2. Audio Input (Аудиовход)
*   **Gain (Чувствительность)**: Множитель амплитуды входящего сигнала. Позволяет подстроить реактивность визуализации под тихие или громкие источники звука.
*   **Bass Threshold (Порог баса)**: Порог громкости в низкочастотном диапазоне (0–255), при превышении которого срабатывают эффекты "бита" (Shake, Pulse, Glitch).

### 2.3. Visual Style (Визуальный стиль)
*   **Категории**: Группы пресетов (Bar/Chill, Club/Dance, Concert/Epic, Cyber/Future, Space/Void).
*   **Preset Select**: Выбор конкретного алгоритма отрисовки (например, "Neon City" или "Starfield").
*   **Hue Shift (Сдвиг цвета)**: Глобальное изменение цветовой палитры визуализации (0–360 градусов по цветовому кругу HSL).

---

## 3. Вкладка CONTENT (Контент)
Управление медиа-файлами, логотипом и текстом.

### 3.1. Background Media (Фоновый контент)
*   **Загрузка**: Кнопки для выбора нескольких изображений или видео.
*   **Opacity (Прозрачность)**: Степень видимости фона поверх черного холста.
*   **Background FX**: Эффекты для фона, срабатывающие на бас (Pulse — пульсация размера, Shake — дрожание, Spin — вращение).
*   **Playlist (Плейлист)**:
    *   **Enable**: Включение автоматической смены фона.
    *   **Slide Duration**: Время отображения одного элемента (в секундах).
    *   **Loop**: Циклическое воспроизведение плейлиста.
    *   **Управление**: Кнопки "Next", "Prev", "Clear" и интерактивный список элементов.

### 3.2. Logo / Center (Логотип и центр)
*   **Загрузка**: Выбор изображения логотипа (PNG/JPG).
*   **Scale (Масштаб)**: Размер логотипа.
*   **Logo FX**: Анимации логотипа (Pulse Size — на бас, Pulse Glow — свечение на бас, Shake — дрожание, Sway — плавное покачивание).
*   **Logo Equalizer (Эквалайзер вокруг лого)**:
    *   **Type**: Форма (Circular, Square, Hexagon, Side Bars, Particles).
    *   **Strength**: Сила реакции полос на звук.
    *   **Padding**: Расстояние от логотипа до эквалайзера.
    *   **Corners/Radius**: Закругление углов (для типа Square).
    *   **Bars Count/Width**: Плотность и толщина линий эквалайзера.
    *   **Closed Loop**: Замыкание контура формы.
    *   **Glow**: Сила свечения линий.

### 3.3. Overlay Text (Текстовый слой)
*   **Текст**: Поле ввода для отображения надписи на экране.
*   **Шрифт**: Выбор из Inter, Orbitron или Impact.
*   **Позиция**: Center (центр), Top (верх), Bottom (низ).
*   **Animation Mode**:
    *   **Static**: Неподвижный.
    *   **Pulse**: Пульсация размера в такт басу.
    *   **Ping Pong**: Движение от края к краю экрана.
    *   **Floating**: Плавное "плавание" в центре.
*   **Animation Speed**: Скорость перемещения или пульсации текста.

---

## 4. Вкладка GLITCH FX (Пост-эффекты)
Набор цифровых искажений, активирующихся в основном на пиках громкости (басах).

*   **Master Glitch Enable**: Глобальный переключатель всех глитч-эффектов.
*   **RGB Channel Split**: Смещение цветовых каналов (красного, синего, зеленого).
    *   **Chaos**: Случайное направление смещения.
    *   **Mode**: Режимы смещения (Pattern, Horizontal, Vertical).
*   **Pixel Slicing**: Разрезание изображения на горизонтальные или вертикальные полосы со смещением.
*   **Digital Noise**: Наложение случайных цветовых полос и шума.
*   **Scatter Blocks**: Копирование и смещение случайных квадратных блоков изображения.
*   **Extra FX**:
    *   **Invert**: Инверсия цветов при сильном басе.
    *   **Beat Zoom**: Резкое приближение изображения на ударных.

---

## 5. Вкладка LIGHTS (Свет)
Световые эффекты, накладываемые поверх всех слоев.

### 5.1. Strobe Light (Стробоскоп)
*   **Color**: Цвет вспышки.
*   **Frequency**: Частота вспышек.
*   **Audio Reactivity**: Насколько сильно громкость звука влияет на вероятность и яркость вспышки.

### 5.2. Laser Show (Лазерное шоу)
*   **Preset**: Тип анимации лучей (Scanner, Rain, Crossfire, Cone, Chaos).
*   **Color**: Цвет лазеров.
*   **Beams Count**: Количество одновременно отображаемых лучей.

---

## 6. Вкладка LAYERS (Слои)
Управление иерархией отрисовки объектов.

*   **Логика**: Объекты в верхней части списка отрисовываются поверх тех, что в нижней.
*   **Управление**: Кнопки со стрелками вверх/вниз для изменения порядка.
*   **Слои**: Background, Visuals, Logo, Text, Lasers, Glitch.

---

## 7. Логика работы и влияние на производительность
1.  **Приоритет рендеринга**: Canvas перерисовывается каждый кадр. Большое количество активных эффектов (особенно Glitch и большое количество лазеров) может снижать FPS на слабых устройствах.
2.  **Синхронизация**: Большинство эффектов "завязаны" на `bassLevel`, который вычисляется в методе `analyzeAudio()`. Если `bassLevel` > `bassThreshold`, срабатывают триггеры `beat`.
3.  **Обработка видео**: При загрузке видео в фон оно автоматически зацикливается и приглушается (muted), чтобы не конфликтовать с визуализацией микрофона.
